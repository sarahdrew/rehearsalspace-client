(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){e.exports=n.p+"static/media/microphone-icon.fb1167af.png"},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(78),c=n.n(i),s=n(2),o=n(3),l=n(5),u=n(4),m=n(6),p=n(13),h=n(8),d=(n(88),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Nav"},r.a.createElement("img",{src:n(89),alt:"rehearsalspae logo"}),r.a.createElement("div",{className:"nav-name"},"REHEARSALSPACE"),r.a.createElement("div",{className:"links"},r.a.createElement(h.b,{to:"/"}," Home")," |",r.a.createElement(h.b,{to:"/registration-form"}," Register for an Account")," |",r.a.createElement(h.b,{to:"/sign-in"}," Sign In")," |",r.a.createElement(h.b,{to:"/create-listing"},"Create Listing"))))}}]),t}(a.Component)),g=n(82),f={API_ENDPOINT:"https://rehearsalspace-api.herokuapp.com",TOKEN_KEY:"tokenKey"},E=r.a.createContext({listings:[],addListing:function(){},updateListings:function(){}}),b=n(14);function v(e){var t=e.className,n=Object(b.a)(e,["className"]);return r.a.createElement("form",Object.assign({className:["Listings-form",t].join(" "),action:"#"},n))}var j={saveAuthToken:function(e){window.localStorage.setItem(f.TOKEN_KEY,e)},getAuthToken:function(){return window.localStorage.getItem(f.TOKEN_KEY)},clearAuthToken:function(){window.localStorage.removeItem(f.TOKEN_KEY)},hasAuthToken:function(){return!!j.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},O=j,y=(n(94),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).addListing=function(e){n.setState({listings:[].concat(Object(g.a)(n.state.listing),[e])})},n.handleSubmit=function(e){e.preventDefault();var t={location:e.target.location.value,size:e.target.size.value,description:e.target.description.value,amenities:{outlets:e.target.outlets.checked,microphone:e.target.microphone.checked,stage:e.target.stage.checked,bathroom:e.target.bathroom.checked}};console.log("config.API_ENDPOINT: ",f.API_ENDPOINT),fetch("".concat(f.API_ENDPOINT,"/api/listings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(O.getAuthToken())},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){n.context.addListing(e),n.props.history.push("/listings/".concat(e.id))}).catch(function(e){console.error({error:e})})},n.state={city:"",size:"",description:"",outlets:!1,microphone:!1,stage:!1,bathroom:!1},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateListings",value:function(e,t,n){this.setState({city:e,size:t,description:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"create-listing"},r.a.createElement("h1",null,"Offer your space"),r.a.createElement("p",null,"You can create your listing as a signed in user. Enter in your information on your space below and see if it matches the needs of a performer in your communitiy!"),r.a.createElement(v,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"location"},"Location:"),r.a.createElement("input",{placeholder:"Chicago",type:"text",name:"location",id:"location",onChange:function(t){return e.updateListings(t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"size"},"Size:"),r.a.createElement("p",null,r.a.createElement("input",{type:"radio",name:"size",value:"1"})," 1 room",r.a.createElement("input",{type:"radio",name:"size",value:"2",onChange:function(t){return e.updateListings(t.target.value)}})," 2 rooms",r.a.createElement("input",{type:"radio",name:"size",value:"3",onChange:function(t){return e.updateListings(t.target.value)}})," 3+ rooms ")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{type:"text",name:"description",id:"description",placeholder:"A gorgeous classroom equipped with chairs, electrical outlets and bathroom down the hall",onChange:function(t){return e.updateListings(t.target.value)}})),r.a.createElement("div",{className:"amenities-list"},r.a.createElement("label",{htmlFor:"amenities"},"Amenities:"),r.a.createElement("input",{type:"checkbox",name:"outlets"})," outlets",r.a.createElement("input",{type:"checkbox",name:"microphone"})," microphone",r.a.createElement("input",{type:"checkbox",name:"stage"}),"stage",r.a.createElement("input",{type:"checkbox",name:"bathroom"}),"bathroom"),r.a.createElement("button",{type:"submit"},"List my space")))}}]),t}(a.Component));y.defaultProps={history:{push:function(){}}},y.contextType=E;var N=r.a.createContext(),_={getAllListings:function(){return fetch("".concat(f.API_ENDPOINT,"/api/listings")).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return e}).then(function(e){return e})},getListing:function(e){return fetch("".concat(f.API_ENDPOINT,"/api/listings/").concat(e),{headers:{authorization:"basic ".concat(O.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return e}).then(function(e){return e})}};n(81);function k(e){var t=e.className,n=Object(b.a)(e,["className"]);return r.a.createElement("button",Object.assign({className:["Button",t].join(" ")},n))}function S(e){var t=e.className,n=Object(b.a)(e,["className"]);return r.a.createElement("input",Object.assign({className:["Input",t].join(" ")},n))}function w(e){var t=e.className,n=Object(b.a)(e,["className"]);return r.a.createElement("span",Object.assign({className:["Required",t].join(" ")},n),"*")}function P(e){var t=e.className,n=e.list,a=Object(b.a)(e,["className","list"]),i=["Section",n&&"Section--list",t].filter(Boolean).join(" ");return r.a.createElement("section",Object.assign({className:i},a))}n(197);var A=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",null,"LOADING . . . ")}}]),t}(a.Component),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.listing;return r.a.createElement("div",{className:"total-listing-item"},r.a.createElement(h.b,{to:"/listings/".concat(e.id),className:"ListingListItem"},r.a.createElement("div",{className:"listing-content"},r.a.createElement("header",{className:"ListingListItem__header"},r.a.createElement("h2",{className:"ListingListItem__heading"},e.location)),r.a.createElement("div",{className:"listing-item"},r.a.createElement("p",null," This space has ",e.size," room(s)."),r.a.createElement("p",null,r.a.createElement("b",null,"Description:"),"  ",e.description),r.a.createElement("p",null,r.a.createElement("b",null,"Amenities:")," ",e.amenities)))))}}]),t}(a.Component);L.contextType=N;n(198);var T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClickDelete=function(e){e.preventDefault();n.props.id},n.state={loading:!0},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.getAllListings().then(function(t){console.log(t),e.context.setListings(t),e.setState({loading:!1})}).catch(function(e){return console.error(e)})}},{key:"renderListings",value:function(){var e=this.context.listings;return(void 0===e?[]:e).map(function(e){return r.a.createElement(L,{key:e.id,listing:e})})}},{key:"render",value:function(){var e=this.context.error;return this.state.loading?r.a.createElement(A,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"explanation"},r.a.createElement("div",{className:"explanation-wrapper"},r.a.createElement("h2",null,"REHEARSALSPACE"),r.a.createElement("h3",null,"Find a space in your city to use for rehearsal!"),r.a.createElement("p",null,r.a.createElement("b",null,"RehearsalSpace is a site for independent performers to find spaces in their city to practice their craft. Check out the listings below to see if any suit your needs. Register for an account and sign in to list your own space.")),r.a.createElement("p",null,"Try signing in with demo version:"),r.a.createElement("p",null,"username: demo password: Demo123!"))),r.a.createElement("div",null,r.a.createElement(P,{list:!0,className:"ListingsListPage"},e?r.a.createElement("p",null," There was an error, try again"):this.renderListings())))}}]),t}(a.Component);T.defaultProps={onDeleteNotes:function(){}},T.contextType=N;var I={postUser:function(e){return fetch("".concat(f.API_ENDPOINT,"/api/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},postLogin:function(e){var t=e.user_name,n=e.password;return fetch("".concat(f.API_ENDPOINT,"/api/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_name:t,password:n})}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return O.saveAuthToken(e.authToken),e}).catch(function(e){})},postRefreshToken:function(){return fetch("".concat(f.API_ENDPOINT,"/api/auth/refresh"),{method:"POST",headers:{authorization:"Bearer ".concat(O.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return O.saveAuthToken(e.authToken),O.queueCallbackBeforeExpiry(function(){I.postRefreshToken()}),e}).catch(function(e){console.error(e)})}},x=I,F=(n(199),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=t.full_name,r=t.user_name,i=t.password;n.setState({error:null}),x.postUser({user_name:r.value,password:i.value,full_name:a.value}).then(function(e){a.value="",r.value="",i.value="",n.props.onRegistrationSuccess(),n.props.history.push("/sign-in")}).catch(function(e){n.setState({error:e.error})})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"headline"},r.a.createElement("h3",null,"Register for an account")),r.a.createElement("div",{className:"total-registration-form"},r.a.createElement("div",{className:"icon-image"},r.a.createElement("img",{src:n(200),alt:"rehearsalspae logo"})),r.a.createElement("form",{className:"RegistrationForm",onSubmit:this.handleSubmit},r.a.createElement("div",{role:"alert"},e&&r.a.createElement("p",{className:"red"},e)),r.a.createElement("div",{className:"full_name"},r.a.createElement("label",{htmlFor:"RegistrationForm__full_name"},"Full name ",r.a.createElement(w,null)),r.a.createElement(S,{name:"full_name",type:"text",required:!0,id:"RegistrationForm__full_name"})),r.a.createElement("div",{className:"user_name"},r.a.createElement("label",{htmlFor:"RegistrationForm__user_name"},"User name ",r.a.createElement(w,null)),r.a.createElement(S,{name:"user_name",type:"text",required:!0,id:"RegistrationForm__user_name"})),r.a.createElement("div",{className:"password"},r.a.createElement("p",null,r.a.createElement("i",null,"Password must be at least 8 characters long, contain a special character, one upper case letter and one lower case letter.")),r.a.createElement("label",{htmlFor:"RegistrationForm__password"},"Password ",r.a.createElement(w,null)),r.a.createElement(S,{name:"password",type:"password",required:!0,id:"RegistrationForm__password"})),r.a.createElement(k,{type:"submit"},"Register"))))}}]),t}(a.Component));F.defaultProps={onRegistrationSuccess:function(){}};var C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n.handleSubmitBasicAuth=function(e){e.preventDefault();var t=e.target,a=t.user_name,r=t.password;x.postLogin({user_name:a.value,password:r.value}).then(function(e){a.value="",r.value="",n.props.onSigninSuccess(),n.props.history.push("/signed-in")}).catch(function(e){n.setState({error:e.error})})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"demo-explanation"},r.a.createElement("p",null,"For a demo, use the following credentials:"),r.a.createElement("p",null,"User name: demo"),r.a.createElement("p",null,"Password: Demo123!")),r.a.createElement("form",{className:"SigninForm",onSubmit:this.handleSubmitBasicAuth},r.a.createElement("div",{role:"alert"},e&&r.a.createElement("p",{className:"red"},e)),r.a.createElement("div",{className:"user_name"},r.a.createElement("label",{htmlFor:"SigninForm__user_name"},"User name"),r.a.createElement(S,{required:!0,name:"user_name",id:"SigninForm__user_name"})),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"SigninForm__password"},"Password"),r.a.createElement(S,{required:!0,name:"password",type:"password",id:"SigninForm__password"})),r.a.createElement(k,{type:"submit"},"Sign In")))}}]),t}(a.Component);C.defaultProps={onSigninSuccess:function(){}};var D=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.listingId;_.getListing(t).then(function(t){return e.context.setListing(t)}).catch(function(e){return console.error(e)})}},{key:"renderListing",value:function(){var e=this.context.listing;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.location),r.a.createElement("p",null,"This space has ",e.size," room(s)."),r.a.createElement("p",null,r.a.createElement("b",null,"Description of the space:"),r.a.createElement(R,{listing:e})),r.a.createElement("p",null," ",r.a.createElement("b",null,"Amenities of the space: "),e.amenities))}},{key:"render",value:function(){var e;return e=void 0===this.context.listing?r.a.createElement("div",{className:"loading"}):this.renderListing(),r.a.createElement("div",{className:"listing-page"},r.a.createElement(P,{className:"ListingPage"}," ",e," "))}}]),t}(a.Component);function R(e){var t=e.listing;return r.a.createElement("p",{className:"ListingPage__description"},t.description)}D.defaultProps={match:{params:{}}},D.contextType=N;n(201);var z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signed-in"},r.a.createElement("h2",null,"Successfully signed in!"),r.a.createElement(h.b,{to:"/"},"Check out rehearsal spaces")," |",r.a.createElement(h.b,{to:"/create-listing"}," Offer up your rehearsal space by creating a listing "))}}]),t}(a.Component),K=(n(202),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleDeleteListing=function(t){e.setState({listings:e.state.listings.filter(function(e){return e.id!==t})})},e.state={listings:[],listing:"",setListing:function(t){e.setState({listing:t})},setListings:function(t){e.setState({listings:t})}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("html",{lang:"en"},r.a.createElement(N.Provider,{value:this.state},r.a.createElement("head",null,r.a.createElement("style",null,"@import url('https://fonts.googleapis.com/css?family=Open+Sans&display=swap');")),r.a.createElement("nav",null,r.a.createElement(d,null)),r.a.createElement("main",{className:"App"},r.a.createElement(p.a,{exact:!0,path:"/",component:T}),r.a.createElement(p.a,{exact:!0,path:"/listings",component:T}),r.a.createElement(p.a,{path:"/listings/:listingId",component:D}),r.a.createElement(p.a,{path:"/create-listing",component:y}),r.a.createElement(p.a,{path:"/registration-form",component:F}),r.a.createElement(p.a,{path:"/sign-in",component:C}),r.a.createElement(p.a,{path:"/signed-in",component:z})))))}}]),t}(a.Component));n(203);c.a.render(r.a.createElement(function(){return r.a.createElement(h.a,null,r.a.createElement(K,null))},null),document.getElementById("root"))},83:function(e,t,n){e.exports=n(204)},88:function(e,t,n){},89:function(e,t,n){e.exports=n.p+"static/media/small-microphone.c19fc196.png"},94:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.d4bbdc5b.chunk.js.map